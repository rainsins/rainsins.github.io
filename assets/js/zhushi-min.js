function processMarkdownContent(){const t=$(".markdown-content").text().split("\n").filter((t=>""!==t.trim()));let n="",i="",o="",s="";for(let r of t)if(r=r.trim(),r.startsWith("## ")){n&&i&&o&&(s+=createAnnotationBlock(n,i,o),n=i=o="");s+=`<h2 class="section-title fade-in">${r.substring(3).trim()}</h2>`}else r.startsWith("@original:")?n=r.substring(10).trim():r.startsWith("@translation:")?i=r.substring(13).trim():r.startsWith("@commentary:")&&(o=r.substring(12).trim(),n&&i&&o&&(s+=createAnnotationBlock(n,i,o),n=i=o=""));n&&i&&o&&(s+=createAnnotationBlock(n,i,o)),$(".rendered-content").html(s),$(window).trigger("scroll")}function createAnnotationBlock(t,n,i){return`\n                <div class="annotation-block fade-in">\n                    <div class="original-text">${t}</div>\n                    <div class="translation">${n}</div>\n                    <div class="commentary">${i}</div>\n                </div>\n            `}$(document).ready((function(){processMarkdownContent(),$(window).scroll((function(){$(".fade-in").each((function(){$(this).offset().top<$(window).scrollTop()+$(window).height()-100&&$(this).addClass("visible")}))}))}));
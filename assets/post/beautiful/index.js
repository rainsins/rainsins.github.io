function Mer() {
    return (
        <>
            <img src="https://api.rainsin.cn/2024/07/f6191a5cc56324631df995133cf1a58e.jpg" />
            <img src="https://api.rainsin.cn/2024/07/d8e42825aaf4cfd5b3ae39fff87209e3.jpg" />
            <img src="https://api.rainsin.cn/2024/07/440ee742ed9792a7ded157c2c3ea3d29.jpg" />
            <img src="https://api.rainsin.cn/2024/07/4f544eca47b4b4b0b055172a0f42e953.jpg" />
            <img src="https://api.rainsin.cn/2024/07/5b9e2a51e831a455b562b6db1e21108a.jpg" />
            <img src="https://api.rainsin.cn/2024/07/5caf1f61c0e8bef8e0a38f1facd829ad.jpg" />
            <img src="https://api.rainsin.cn/2024/07/79e7d45709ca5ca62f050a1c21acabeb.jpg" />
            <img src="https://api.rainsin.cn/2024/07/49783f6990a99958d90e0080c3a8780a.jpg" />
            <img src="https://api.rainsin.cn/2024/07/189b5924303fcf90681cd33a84af4305.jpg" />
            <img src="https://api.rainsin.cn/2024/07/749082036fe87579dc3f900d60ca494a.jpg" />
            <img src="https://api.rainsin.cn/2024/07/7530315eb19b3a7405184ada2d08f825.jpg" />
            <img src="https://api.rainsin.cn/2024/07/5da31ed87be1d47e71164044c5b46866.jpg" />
            <img src="https://api.rainsin.cn/2024/07/b96dcf8a725d4cce6e8a13eae99c108b.jpg" />
            <img src="https://api.rainsin.cn/2024/07/996c2d7b0e50991b8adb50f5c62f7524.jpg" />
            <img src="https://api.rainsin.cn/2024/07/793fc97c847330bf4a6032d8e9cb24f5.jpg" />
            <img src="https://api.rainsin.cn/2024/07/57d8e4111140427e8cf297b7d93c592e.jpg" />
            <img src="https://api.rainsin.cn/2024/07/b459063e127073b7a8d3b9ff30ffd8ce.jpg" />
            <img src="https://api.rainsin.cn/2024/07/68e51054655b63d11f28ef1a5adf05b9.jpg" />
            <img src="https://api.rainsin.cn/2024/07/0ba6013512d9104501e01f78ae63aebf.jpg" />
            <img src="https://api.rainsin.cn/2024/07/c3730079e3529e89e515e6d5bea62367.jpg" />
            <img src="https://api.rainsin.cn/2024/07/27692e058f90fa8505ad716af5831b19.jpg" />
            <img src="https://api.rainsin.cn/2024/07/a27317c2ef802870d79ae13e2c5d0884.jpg" />
            <img src="https://api.rainsin.cn/2024/07/478526990ef3b4e0fe33875524dbaaee.jpg" />
            <img src="https://api.rainsin.cn/2024/07/9fc76e71a55270a4b7dee790b838d6b6.jpg" />
            <img src="https://api.rainsin.cn/2024/07/fa675b98b161c4ea17ab208143f98196.jpg" />
            <img src="https://api.rainsin.cn/2024/07/101003448fd93bc0fa45f6d34889fa6d.jpg" />
            <img src="https://api.rainsin.cn/2024/07/cf3b07b4ef2c7e5ffb38a61bb3c7d294.jpg" />
            <img src="https://api.rainsin.cn/2024/07/439e72b34f18375ab1709718d63fc3b0.jpg" />
            <img src="https://api.rainsin.cn/2024/07/3d9f04fe54d42f24777fe7d19082ccac.jpg" />
            <img src="https://api.rainsin.cn/2024/07/a196792fbface5ae96b7085a0d57da8a.jpg" />
            <img src="https://api.rainsin.cn/2024/07/e76e3f667d8c55737ea2b0c514b36cb5.png" />
            <img src="https://api.rainsin.cn/2024/07/a21ff8c462f7a8457d71687b6f602359.jpg" />
            <img src="https://api.rainsin.cn/2024/07/cd34f5c4157c0e729a3bad643e51e46d.jpeg" />
            <img src="https://api.rainsin.cn/2024/07/be6c46a63c613a5fe6383f188d4fc91f.jpg" />
            <img src="https://api.rainsin.cn/2024/07/3dda76850a021a1ddca882410eb4c7d9.jpg" />
            <img src="https://api.rainsin.cn/2024/07/0bf8622d5777dc52637c711523c16602.jpeg" />
            <img src="https://api.rainsin.cn/2024/07/31ecfbc2e09a9c9b1aeaf853c152c166.jpg" />
            <img src="https://api.rainsin.cn/2024/07/a0d829344ad6b63312716ee9b881c886.jpg" />
            <img src="https://api.rainsin.cn/2024/07/32ba42b48fd442c7012663f29adfb96b.jpg" />
            <img src="https://api.rainsin.cn/2024/07/ac02c83f376b36de7f5aec02f50678cf.jpg" />
            <img src="https://api.rainsin.cn/2024/07/b1bbed0e949c81989463e77894e28c8a.jpg" />
            <img src="https://api.rainsin.cn/2024/07/cf3b07b4ef2c7e5ffb38a61bb3c7d294.jpg" />
            <img src="https://api.rainsin.cn/2024/07/48e43361dfe2b743828da8e77e962de5.jpg" />
            <img src="https://api.rainsin.cn/2024/07/24b5d780046dad52406b7b0d0dc6a418.jpg" />
            <img src="https://api.rainsin.cn/2024/07/92de23c82070ec879489c88e3571d70f.jpg" />
            <img src="https://api.rainsin.cn/2024/07/a3b916086e6b1491d2e6543b43a564de.jpg" />
            <img src="https://api.rainsin.cn/2024/07/bcba46d4d6085f4a493fd0afed19ddd9.jpg" />
            <img src="https://api.rainsin.cn/2024/07/5f90d1a1a9f49b8c80840679bde15155.jpg" />
            <img src="https://api.rainsin.cn/2024/07/84a5c5ef1ee5e58d5f2ddcf09ec3701e.jpg" />
            <img src="https://api.rainsin.cn/2024/07/db9d724aee0f647dd2902794d76a1cb5.jpg" />
            <img src="https://api.rainsin.cn/2024/07/3ad755438e42250c3845365f5d8dcd04.jpg" />
            <img src="https://api.rainsin.cn/2024/07/faedf226cd79db116a2058d477de129f.jpg" />
            <img src="https://api.rainsin.cn/2024/07/deb847137f42ee87c07876825f85886c.jpg" />
            <img src="https://api.rainsin.cn/2024/07/d85264cbe867538e5747481eba22ea76.jpg" />
            <img src="https://api.rainsin.cn/2024/07/1433b75758d95ced7e7e5743fbf3888a.jpg" />
            <img src="https://api.rainsin.cn/2024/07/aeae9baeeb3f6a5e1151e614685ddcd7.jpg" />
            <img src="https://api.rainsin.cn/2024/07/d7ca401325d0ffc5b754d917c1d21337.jpg" />
            <img src="https://api.rainsin.cn/2024/07/e4674feb4f89371cdd6f6761d8f3eaa2.jpg" />
            <img src="https://api.rainsin.cn/2024/07/9a6704d60c68d6808efc77c5af4e9b8b.jpg" />
            <img src="https://api.rainsin.cn/2024/07/1f687e0b7fea2f0afa9b7fd071510806.jpg" />
            <img src="https://api.rainsin.cn/2024/07/f8fae926f78dabf8c069314cf90769c5.jpg" />
            <img src="https://api.rainsin.cn/2024/07/7df061d070d8fc5b687ac7291017191e.jpg" />
            <img src="https://api.rainsin.cn/2024/07/c377a188e3c7fb59829abdeb608f31bd.jpg" />
            <img src="https://api.rainsin.cn/2024/07/fbb108bae95815629b4406b3fec3c456.jpg" />
            <img src="https://api.rainsin.cn/2024/07/3d3a79094aaa9135c749ba17cc151292.jpg" />
            <img src="https://api.rainsin.cn/2024/07/ee229b8b0a20f5736fb97595a5e04cf4.jpg" />
            <img src="https://api.rainsin.cn/2024/07/959864579ee16e58c42c2c41219f9816.jpg" />
            <img src="https://api.rainsin.cn/2024/07/0aafa0ae63c1f2ca1554c121fb2a76b7.jpg" />
            <img src="https://api.rainsin.cn/2024/07/1a05100010e61be028e7b1e3b4861ed7.jpg" />
            <img src="https://api.rainsin.cn/2024/07/4379cefbada86991eb6f867a274759b7.jpg" />
            <img src="https://api.rainsin.cn/2024/07/d41722ba61f3b1aa04fefc371889bbec.jpg" />
            <img src="https://api.rainsin.cn/2024/07/d69131ec39f408e85a516cf7d6e33e05.jpg" />
        </>
    );
};

//是否展示
const okContext = React.createContext(false);
//答案是否对
const AnsContext = React.createContext(false);

const questions = [
    {
        latex: "\\lim_{x\\rightarrow 0} \\frac{\\left( 1+x\\right)^{\\frac{1}{x} }  -\\left( 1+2x\\right)^{\\frac{1}{2x} }  }{sinx} ",
        ans: "\\frac{e}{2}",
        ans1: "\\frac{1}{2}e"
    },
];

const key_latex = [
    {
        latex: "\\frac{}{}",
        add: 7,
        exp: "\\frac{a}{b}",
        title: "分式"
    },
    {
        latex: "\\sqrt[]{}",
        add: 7,
        exp: "\\sqrt[a]{b}",
        title: "开b的a次方根"
    },
    {
        latex: "\\sqrt{}",
        add: 7,
        exp: "\\sqrt{a}",
        title: "开a的平方"
    },
    {
        latex: "{}^{}_{}",
        add: 2,
        exp: "{s}^{a}_{b}",
        title: "上下标"
    },
    {
        latex: "{}_{}",
        add: 2,
        exp: "{s}_{a}",
        title: "下标"
    },
    {
        latex: "{}^{}",
        add: 2,
        exp: "{s}^{a}",
        title: "上标"
    },
    {
        latex: "||",
        add: 2,
        exp: "|a|",
        title: "绝对值"
    },
    {
        latex: "\\infty",
        add: 1,
        exp: "\\infty",
        title: "无穷"
    },
];

function Question({ lat }) {
    const [isOk, setIsOk] = React.useContext(okContext);
    const [isAns, setAns] = React.useContext(AnsContext);

    const [latexData, setLatexData] = React.useState("");

    React.useEffect(() => {
        let math = document.getElementsByClassName("ques-detail");
        MathJax.typeset(math);
        let math2 = document.getElementsByClassName("key-item");
        MathJax.typeset(math2);
    }, []);

    let isRun = false;

    React.useEffect(() => {
        let math3 = document.getElementsByClassName("show-ans-latex");
        MathJax.typeset(math3);
        if (latexData == lat.ans || latexData == lat.ans1) {
            setAns(true);
        }
    }, [latexData]);

    const add_text = (el, ev) => {
        let tem = `${latexData}${el.exp}`;
        setLatexData(tem);
        document.getElementById("in-latex").value = tem;
    };

    const data_change = (e) => {
        setLatexData(e.target.value);
    };

    const key_item = key_latex.map((el, index) => {
        return (
            <div className="key-item" key={index} title={el.title} onClick={(event) => add_text(el, event)}>
                <div className="key-item-on">{`\\(${el.exp}\\)`}</div>
            </div>
        );
    });

    function isOk_handle() {
        if (isAns) {
            setIsOk(true);
        } else {
            alert("答案错误，请重新输入！")
        }
    };

    return (
        <div className="ques-main">
            <div className="ques-box">
                <div className="ques-title">
                    问题：
                </div>
                <div className="ques-detail">
                    $${lat.latex}$$
                </div>
            </div>
            <div className="ans-box">
                <div className="ans-title">
                    答案：
                </div>
                <div className="latex-keyborad">
                    <div className="key-title">小键盘</div>
                    <div className="latex-keyborad-det">
                        {key_item}
                    </div>
                </div>
                <div className="ans-show-box">
                    <input id="in-latex" className="ans-show-in" min="1" max="20" placeholder="请输入你的答案（Latex）" onChange={data_change} />
                    <div className="ans-show">
                        <div className="show-ans-latex">
                            {`$$${latexData}$$`}
                        </div>
                    </div>
                </div>
                <div className="botton-ques-box">
                    <div className="botton-ques" onClick={isOk_handle}>
                        提交答案
                    </div>
                </div>
            </div>
        </div>
    );
};

function MathCom() {
    // const [isOk,setIsOk] = React.useContext(okContext);
    // const [isAns,setAns] = React.useContext(AnsContext);

    const q_item = questions.map((el, index) => {
        return (
            <Question lat={el} />
        );
    });

    // function isOk_handle(){
    //     if(isAns){
    //         setIsOk(true);
    //     }else{
    //         alert("答案错误，请重新输入！")
    //     }
    // };

    return (
        <div className="question-boxs">
            {q_item}
        </div>
    );
};

function Is_Show({ isok, setok }) {
    const [isOk, setIsOk] = React.useState(false);
    const [isAns, setAns] = React.useState(false);
    return (
        <div className="is-show-mm">
            <AnsContext.Provider value={[isAns, setAns]}>
                <okContext.Provider value={[isOk, setIsOk]}>
                    {isOk ? <Mer /> : <MathCom />}
                </okContext.Provider>
            </AnsContext.Provider>
        </div>
    );
};

const mm_boxs = ReactDOM.createRoot(document.getElementById('mm-box'));
mm_boxs.render(<Is_Show />);